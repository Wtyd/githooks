#!/usr/bin/env php
<?php

require getcwd() . '/vendor/autoload.php';

use GitHooks\Commands\Tools\{
    CheckSecurityCommand,
    CodeSnifferCommand,
    CopyPasteDetectorCommand,
    MessDetectorCommand,
    ParallelLintCommand,
    StanCommand,
    ExecuteAllToolsCommand
};

use GitHooks\Commands\{
    CheckConfigurationFileCommand,
    CleanHookCommand,
    CreateConfigurationFileCommand,
    HookCommand
};
use GitHooks\Commands\Console\RegisterCommands;
use Illuminate\Container\Container;
use Illuminate\Events\Dispatcher;
use Illuminate\Console\Application;

$container = new Container();
$events = new Dispatcher($container);

$artisan = new Application($container, $events, 'Version 1.0');
$artisan->setName('GitHooks');

$registerCommands = new RegisterCommands();

foreach ($registerCommands->__invoke() as $command) {
    $artisan->resolve($command);
}

$artisan->run();
